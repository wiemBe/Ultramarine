<!DOCTYPE html>
<html>
<head>
    <title>{{ .Title }}</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            width: 400px;
        }

        .button {
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            font-size: 16px;
            cursor: pointer;
            flex: 1 1 45%;
        }

        .button1 { background-color: rgb(5, 17, 255); }
        .button2 { background-color: rgb(219, 39, 23); }
        .button3 { background-color: rgb(0, 0, 0); }
        .button4 { background-color: rgb(95, 255, 2); }

        #queueDisplay {
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div>
        <div class="button-container">
            <button class="button button1" id="button1">İstasyon 1</button>
            <button class="button button2" id="button2">İstasyon 2</button>
            <button class="button button3" id="button3">İstasyon 3</button>
            <button class="button button4" id="button4">İstasyon 4</button>
        </div>
        <div id="queueDisplay"></div>
    </div>
    
    <script>
        let queue = [];
        const QUEUE_LIMIT = 5;

        function updateQueueDisplay() {
            const queueDisplay = document.getElementById('queueDisplay');
            queueDisplay.innerHTML = 'Queue: ' + queue.join(', ') + '<br>Remaining slots: ' + (QUEUE_LIMIT - queue.length);
        }

        function addToQueue(stationNumber) {
         fetch('http://localhost:8080/que', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
        },
        body: JSON.stringify({ station: stationNumber }),
        })
        .then(response => response.json())
        .then(data => {
        if (data.onQue === "1") {
            queue.push('İstasyon ' + stationNumber);
            updateQueueDisplay();
            alert("Added to queue: İstasyon " + stationNumber);
        } else {
            alert(data.message || "Failed to add to queue");
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert("Error adding to queue");
    });
}
        document.getElementById("button1").addEventListener("click", function() {
            addToQueue(1);
        });
        document.getElementById("button2").addEventListener("click", function() {
            addToQueue(2);
        });
        document.getElementById("button3").addEventListener("click", function() {
            addToQueue(3);
        });
        document.getElementById("button4").addEventListener("click", function() {
            addToQueue(4);
        });

        // Initial display update
        updateQueueDisplay();
    </script>
</body>
</html>